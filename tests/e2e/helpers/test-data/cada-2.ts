import { Repartition } from "@/types/adresse.type";
import { StructureType } from "@/types/structure.type";

import { TestStructureScenario } from "./types";

export const cada2: TestStructureScenario = {
  name: "CADA 2 - Diffus, multiple addresses, most documents at finalisation, two contacts, recent eval, no optional actes administratifs",
  formData: {
    dnaCode: "C1234",
    type: StructureType.CADA,
    cpom: false,
    operateur: {
      name: "Opérateur 1",
      searchTerm: "Opér",
      id: 1,
    },
    creationDate: "2015-06-01",
    finessCode: "123456789",
    public: "Tout public",
    lgbt: true,
    fvvTeh: true,
    contactPrincipal: {
      prenom: "John",
      nom: "Doe",
      role: "Directeur·rice",
      email: "john.doe@example.com",
      telephone: "+33123456789",
    },
    contactSecondaire: {
      prenom: "Jane",
      nom: "Deo",
      role: "Responsable administratif",
      email: "jane.deo@example.com",
      telephone: "+33623456789",
    },
    debutPeriodeAutorisation: "2020-01-01",
    finPeriodeAutorisation: "2025-12-31",
    nom: "Structure Test",
    adresseAdministrative: {
      complete: "1 Rue de la Paix 75001 Paris",
      searchTerm: "1 Rue de la Paix 75001 Paris",
    },
    departementAdministratif: "75",
    typeBati: Repartition.DIFFUS,
    sameAddress: false,
    adresses: [
      {
        adresseComplete: "1 Rue de la Paix 75001 Paris",
        searchTerm: "1 Rue de la Paix 75001 Paris",
        placesAutorisees: 50,
      },
      {
        adresseComplete: "2 Rue de la Paix 75001 Paris",
        searchTerm: "2 Rue de la Paix 75001 Paris",
        placesAutorisees: 150,
      },
    ],
    structureTypologies: [
      { placesAutorisees: 50, pmr: 5, lgbt: 10, fvvTeh: 8 },
      { placesAutorisees: 48, pmr: 5, lgbt: 10, fvvTeh: 8 },
      { placesAutorisees: 45, pmr: 4, lgbt: 8, fvvTeh: 7 },
    ],
    documentsFinanciers: {
      allAddedViaAjout: false,
      fileUploads: [
        {
          year: "2025",
          category: "Budget prévisionnel demandé",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2025",
          category: "Budget prévisionnel retenu (ou exécutoire)",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2024",
          category: "Budget prévisionnel demandé",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2024",
          category: "Budget prévisionnel retenu (ou exécutoire)",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2024",
          category: "Compte administratif soumis",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2024",
          category: "Rapport d'activité",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2023",
          category: "Budget prévisionnel demandé",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2023",
          category: "Budget prévisionnel retenu (ou exécutoire)",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2023",
          category: "Compte administratif soumis",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2023",
          category: "Rapport d'activité",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2023",
          category: "Compte administratif retenu",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2022",
          category: "Budget prévisionnel demandé",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2022",
          category: "Budget prévisionnel retenu (ou exécutoire)",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2022",
          category: "Compte administratif soumis",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2022",
          category: "Rapport d'activité",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2022",
          category: "Compte administratif retenu",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2021",
          category: "Budget prévisionnel demandé",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "ajout",
        },
        {
          year: "2021",
          category: "Budget prévisionnel retenu (ou exécutoire)",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "ajout",
        },
        {
          year: "2021",
          category: "Compte administratif soumis",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2021",
          category: "Rapport d'activité",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
        {
          year: "2021",
          category: "Compte administratif retenu",
          fileName: "sample.csv",
          filePath: "tests/e2e/fixtures/sample.csv",
          formKind: "finalisation",
        },
      ],
    },
    finances: {
      2025: {
        ETP: "8",
        tauxEncadrement: "12,5",
        coutJournalier: "23,75",
        dotationDemandee: "120000",
        dotationAccordee: "110000",
      },
      2024: {
        ETP: 9,
        tauxEncadrement: 11.25,
        coutJournalier: 49.9,
        dotationDemandee: "9999999",
        dotationAccordee: "9500000",
        totalProduitsProposes: "1234567,89",
        totalProduits: "1234500",
        totalChargesProposees: "1100",
        totalCharges: "1099999,5",
        repriseEtat: "0",
        affectationReservesFondsDedies: "2500",
        reserveInvestissement: "1000",
        chargesNonReconductibles: "150,5",
        reserveCompensationDeficits: "250",
        reserveCompensationBFR: "75",
        reserveCompensationAmortissements: "50",
        reportANouveau: "500",
        autre: "25",
      },
      2023: {
        ETP: "10",
        tauxEncadrement: "9,8",
        coutJournalier: 60.25,
        dotationDemandee: "250000",
        dotationAccordee: "249999,99",
        totalProduitsProposes: "300000",
        totalProduits: "299000,1",
        totalChargesProposees: "280000",
        totalCharges: "279999,99",
        repriseEtat: "-1500",
        excedentRecupere: "0",
        excedentDeduit: "0",
        affectationReservesFondsDedies: "0",
      },
      2022: {
        ETP: 7,
        tauxEncadrement: "10",
        coutJournalier: "0,5",
        dotationDemandee: "12345",
        dotationAccordee: "12000",
        totalProduitsProposes: "45000",
        totalProduits: "44000",
        totalChargesProposees: "43000",
        totalCharges: "42000",
        repriseEtat: "100",
        excedentRecupere: "10",
        excedentDeduit: "5",
        affectationReservesFondsDedies: "0",
      },
      2021: {
        ETP: "3",
        tauxEncadrement: "2,75",
        coutJournalier: "1500",
        dotationDemandee: "1",
        dotationAccordee: "1",
        totalProduitsProposes: "2",
        totalProduits: "2",
        totalChargesProposees: "1",
        totalCharges: "1",
        repriseEtat: "0",
        excedentRecupere: "0",
        excedentDeduit: "0",
        affectationReservesFondsDedies: "1",
        reserveInvestissement: "0",
        chargesNonReconductibles: "0",
        reserveCompensationDeficits: "0",
        reserveCompensationBFR: "0",
        reserveCompensationAmortissements: "0",
        reportANouveau: "0",
        autre: "0",
      },
    },
    evaluations: [
      {
        date: "2023-09-18",
        notePersonne: "3",
        notePro: "2.5",
        noteStructure: "3.5",
        note: "3",
        filePath: "tests/e2e/fixtures/sample.csv",
      },
    ],
    controles: [],
    ouvertureFermeture: {
      placesACreer: "4",
      echeancePlacesACreer: "2025-09-01",
      placesAFermer: "1",
      echeancePlacesAFermer: "2025-11-15",
    },
    actesAdministratifs: [
      {
        category: "ARRETE_AUTORISATION",
        startDate: "2020-01-01",
        endDate: "2025-12-31",
        filePath: "tests/e2e/fixtures/sample.csv",
      },
      {
        category: "ARRETE_TARIFICATION",
        startDate: "2022-01-01",
        endDate: "2023-12-31",
        filePath: "tests/e2e/fixtures/sample.csv",
      },
    ],
    finalisationNotes:
      "Notes de finalisation dynamiques (CADA) : contrôle OK, suivi actif.",
  },
  modificationData: {
    public: "Personnes isolées",
    lgbt: false,
    fvvTeh: true,
    contactPrincipal: { email: "modif-cada2@example.com" },
    notes: "Notes modification CADA 2 - évolution structure.",
    debutPeriodeAutorisation: "2020-03-01",
    finPeriodeAutorisation: "2026-03-31",
    ouvertureFermeture: {
      placesACreer: "8",
      echeancePlacesACreer: "2026-09-15",
      placesAFermer: "0",
      echeancePlacesAFermer: "2026-12-01",
    },
    structureTypologies: [
      { placesAutorisees: 55, pmr: 7, lgbt: 11, fvvTeh: 9 },
      { placesAutorisees: 52, pmr: 6, lgbt: 11, fvvTeh: 9 },
      { placesAutorisees: 48, pmr: 5, lgbt: 9, fvvTeh: 8 },
    ],
    finances: {
      2025: {
        ETP: "10",
        tauxEncadrement: "11",
        coutJournalier: 25.5,
        dotationDemandee: "130000",
        dotationAccordee: "120000",
      },
    },
    controles: [
      {
        date: "2024-01-15",
        type: "Programmé",
        filePath: "tests/e2e/fixtures/sample.csv",
      },
    ],
    actesAdministratifs: [
      {
        category: "CONVENTION",
        startDate: "2024-01-01",
        endDate: "2026-12-31",
        filePath: "tests/e2e/fixtures/sample.csv",
      },
    ],
  },
};
